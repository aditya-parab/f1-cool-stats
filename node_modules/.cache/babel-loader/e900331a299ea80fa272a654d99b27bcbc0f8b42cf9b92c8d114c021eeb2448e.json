{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PastRaces(){const[pastRaces,setPastRaces]=useState([]);const[isLoading,setLoading]=useState(false);const today=new Date();// Get today's date in YYYY-MM-DD format\nconst todaysyear=today.getFullYear();async function fetchPastRaces(){setLoading(true);try{var _response$data,_response$data$MRData,_response$data$MRData2;const url=\"https://ergast.com/api/f1/\".concat(todaysyear,\"/results/1.json\");const response=await axios.get(url);const data=(_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$MRData=_response$data.MRData)===null||_response$data$MRData===void 0?void 0:(_response$data$MRData2=_response$data$MRData.RaceTable)===null||_response$data$MRData2===void 0?void 0:_response$data$MRData2.Races;setPastRaces(data);console.log(data);}catch(error){console.error(\"Error fetching past races:\",error);}finally{setLoading(false);}}useEffect(()=>{fetchPastRaces();},[]);function handleRefresh(){fetchPastRaces();}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Past Races\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRefresh,disabled:isLoading,children:isLoading?\"Refreshing...\":\"Refresh Races\"}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading past races...\"}):pastRaces.length>0?/*#__PURE__*/_jsx(\"ol\",{children:pastRaces.map(race=>/*#__PURE__*/_jsxs(\"li\",{children:[race.raceName,\" : \",race.Results[0].Driver.familyName]},race.round))}):/*#__PURE__*/_jsx(\"p\",{children:\"No past races found.\"})]});}export default PastRaces;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","PastRaces","pastRaces","setPastRaces","isLoading","setLoading","today","Date","todaysyear","getFullYear","fetchPastRaces","_response$data","_response$data$MRData","_response$data$MRData2","url","concat","response","get","data","MRData","RaceTable","Races","console","log","error","handleRefresh","children","onClick","disabled","className","length","map","race","raceName","Results","Driver","familyName","round"],"sources":["/Users/adity/Coding/f1app/f1-cool-stats/src/PastRaces.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\n\n\nfunction PastRaces() {\n  const [pastRaces, setPastRaces] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  const today = new Date(); // Get today's date in YYYY-MM-DD format\n  const todaysyear = today.getFullYear();\n\n  async function fetchPastRaces() {\n    setLoading(true);\n    try {\n      const url = `https://ergast.com/api/f1/${todaysyear}/results/1.json`;\n    \n      const response = await axios.get(url);\n      const data = response.data?.MRData?.RaceTable?.Races;\n      setPastRaces(data);\n      console.log(data);\n\n    } catch (error) {\n      console.error(\"Error fetching past races:\", error);\n    } finally {\n      setLoading(false);\n    }\n\n\n    \n  }\n\n\n  useEffect(() => {\n    fetchPastRaces();\n  }, []);\n\n  function handleRefresh() {\n    fetchPastRaces();\n  }\n\n\n \n\n\n\n  return (\n    <div>\n      <h2>Past Races</h2>\n      <button onClick={handleRefresh} disabled={isLoading}>\n        {isLoading ? \"Refreshing...\" : \"Refresh Races\"}\n      </button>\n      {isLoading ? (\n        <div className=\"loading\">Loading past races...</div>\n      ) : pastRaces.length > 0 ? (\n        <ol>\n          {/* Map over pastRaces and display details */}\n          {pastRaces.map((race) => (\n            <li key={race.round}>\n              {/* Display race details (e.g., race name, date, winner) */}\n              {race.raceName} : {race.Results[0].Driver.familyName}\n              \n            </li>\n          ))}\n        </ol>\n      ) : (\n        <p>No past races found.</p>\n      )}\n    </div>\n  );\n}\n\nexport default PastRaces;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAI1B,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACU,SAAS,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAAY,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAAE;AAC1B,KAAM,CAAAC,UAAU,CAAGF,KAAK,CAACG,WAAW,CAAC,CAAC,CAEtC,cAAe,CAAAC,cAAcA,CAAA,CAAG,CAC9BL,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,KAAAM,cAAA,CAAAC,qBAAA,CAAAC,sBAAA,CACF,KAAM,CAAAC,GAAG,8BAAAC,MAAA,CAAgCP,UAAU,mBAAiB,CAEpE,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAACH,GAAG,CAAC,CACrC,KAAM,CAAAI,IAAI,EAAAP,cAAA,CAAGK,QAAQ,CAACE,IAAI,UAAAP,cAAA,kBAAAC,qBAAA,CAAbD,cAAA,CAAeQ,MAAM,UAAAP,qBAAA,kBAAAC,sBAAA,CAArBD,qBAAA,CAAuBQ,SAAS,UAAAP,sBAAA,iBAAhCA,sBAAA,CAAkCQ,KAAK,CACpDlB,YAAY,CAACe,IAAI,CAAC,CAClBI,OAAO,CAACC,GAAG,CAACL,IAAI,CAAC,CAEnB,CAAE,MAAOM,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CAAC,OAAS,CACRnB,UAAU,CAAC,KAAK,CAAC,CACnB,CAIF,CAGAV,SAAS,CAAC,IAAM,CACde,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAe,aAAaA,CAAA,CAAG,CACvBf,cAAc,CAAC,CAAC,CAClB,CAOA,mBACEV,KAAA,QAAA0B,QAAA,eACE5B,IAAA,OAAA4B,QAAA,CAAI,YAAU,CAAI,CAAC,cACnB5B,IAAA,WAAQ6B,OAAO,CAAEF,aAAc,CAACG,QAAQ,CAAExB,SAAU,CAAAsB,QAAA,CACjDtB,SAAS,CAAG,eAAe,CAAG,eAAe,CACxC,CAAC,CACRA,SAAS,cACRN,IAAA,QAAK+B,SAAS,CAAC,SAAS,CAAAH,QAAA,CAAC,uBAAqB,CAAK,CAAC,CAClDxB,SAAS,CAAC4B,MAAM,CAAG,CAAC,cACtBhC,IAAA,OAAA4B,QAAA,CAEGxB,SAAS,CAAC6B,GAAG,CAAEC,IAAI,eAClBhC,KAAA,OAAA0B,QAAA,EAEGM,IAAI,CAACC,QAAQ,CAAC,KAAG,CAACD,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,UAAU,GAF7CJ,IAAI,CAACK,KAIV,CACL,CAAC,CACA,CAAC,cAELvC,IAAA,MAAA4B,QAAA,CAAG,sBAAoB,CAAG,CAC3B,EACE,CAAC,CAEV,CAEA,cAAe,CAAAzB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}